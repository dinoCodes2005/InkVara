<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'header.css' %}" />
    <link rel="stylesheet" href="{% static 'blogHome.css'%}" />
    <link rel="stylesheet" href="{% static 'footer.css'%}" />
  </head>
  <body>
    <header>
      <nav>
        <a href=""
          ><img
            class="headerLogo"
            src="{% static '1to1 invictus logo.png'%}"
            height="50px"
            width="50px"
        /></a>
        <a href="{% url 'blogarea'%}" class="nav-items">Home</a>
        <a href="" class="nav-items">My Blogs</a>
        <a href="#" style="text-decoration: none">
          Category
          <!-- <label for="check" id="categoryHeader">Category</label> -->
          <!-- <input id="check" type="checkbox" />
          <div id="dropDown" class="invisibleList">
            <div class="items">1</div>
            <div class="items">2</div>
            <div class="items">3</div>
            <div class="items">4</div>
            <div class="items">5</div>
          </div> -->
        </a>
        <a href="" class="nav-items">About</a>
        <a href="" class="nav-items">Contact</a>
        {% if user.is_authenticated %}
        <a
          class="profilePic"
          href="{% url 'editProfile' %}"
          style="
            margin: 0;
            margin-left: auto;
            margin-bottom: 20px;
            margin-right: 10px;
          "
        >
          <img
            style="
              width: 50px;
              height: 50px;
              transform: translateY(15px);
              border-radius: 50%;
            "
            src="{% static 'blue-circle-with-white-user_78370-4707.jpg'%}"
            alt=""
        /></a>
        {% endif %}
        <form action="{% url 'logout' %}" method="post">
          {% csrf_token %}
          <button class="headerSignUp">Logout</button>
        </form>
        <form action="{% url 'writeYourBlog'%}">
          {% csrf_token %}
          <button class="headerCreateBlog">Create Blog</button>
        </form>
      </nav>
    </header>
    <h1 class="recentPosts">Recent Blogs</h1>
    <div class="CardContainer">
      {% for post in object_list %}
      <div class="item">
        <div class="Cards">
          <a
            href="{% url 'ArticleDetailView' post.pk %}"
            style="text-decoration: none; margin: 0"
          >
            <img
              class="CardImages"
              style="height: 300px"
              src="{% if post.thumbnail %}{{ post.thumbnail.url }}{% else %}/media/thumbnail/thumbnail.jpg{% endif %}"
              alt="{{ post.title }}"
            />
          </a>
          <p style="text-align: justify">
            <span class="cardTitle">{{ post.title }}</span>
            <span class="cardAuthor_Date"
              >&larr; by {{ post.author }} &bull; {{ post.post_date }}
            </span>
          </p>
          <div style="display: flex">
            <div style="display: flex; flex-direction: column; gap: 5px">
              <a
                class="cardCategory"
                href="{% url 'category' post.category|slugify %}"
                style="
                  margin-left: 20px;
                  margin-bottom: 0;
                  margin-top: 0;
                  color: #828282;
                "
              >
                /{{ post.category|lower|slugify }}</a
              >
              <p class="articleSnippet">{{post.articleSnippet}}</p>
              {% if post.author.id == user.id %}
              <div style="display: flex">
                <a
                  href="{% url 'updateBlog' post.pk %}"
                  style="
                    margin-left: 20px;
                    margin-bottom: 20px;
                    margin-top: 5px;
                  "
                  >(Edit)</a
                >
                <a
                  href="{% url 'deleteBlog' post.pk %}"
                  style="
                    margin-left: 20px;
                    margin-bottom: 20px;
                    margin-top: 5px;
                  "
                  >(Delete)</a
                >
              </div>
              {% endif %}
            </div>
            <a
              href="{% url 'ArticleDetailView' post.pk %}"
              style="margin: auto 50px auto auto"
            >
              <button
                class="ReadMore"
                style="margin-bottom: 30px; margin-top: 20px"
              >
                Read More
              </button>
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>

    <button id="show-more">Show More</button>
    <footer>
      <div id="Bottom-info-part">
        <div class="rows">
          <div class="colRows">
            <h1>Help</h1>
            <hr />
            <a href="" style="text-decoration: none; color: whitesmoke"
              >Help Center</a
            >
            <br />
            <a href="" style="text-decoration: none; color: whitesmoke"
              >Help Forums</a
            >
            <br />
            <a href="" style="text-decoration: none; color: whitesmoke"
              >Video Tutorials</a
            >
            <br />
          </div>
          <div class="colRows">
            <h1>Community</h1>
            <hr />
            <a href="" style="text-decoration: none; color: whitesmoke"
              >Ink Vara</a
            >
          </div>
          <div class="colRows">
            <h1>Work With Us</h1>
            <hr />
            <a style="text-decoration: none; color: white" href=""
              >Instagram&nbsp;&nbsp;<img
                src="{%static 'instagram.svg'%}"
                width="25px"
                height="25px"
                style="filter: invert(); margin-bottom: 10px"
            /></a>
            <br />
            <a style="text-decoration: none; color: white" href=""
              >Twitter&nbsp;&nbsp;<img
                src="{%static 'twitter.svg'%}"
                width="25px"
                height="25px"
                style="filter: brightness(0) invert(1); margin-bottom: 10px"
            /></a>
            <br />
            <a style="text-decoration: none; color: white" href=""
              >Facebook&nbsp;&nbsp;<img
                src="{%static 'facebook.svg'%}"
                width="25px"
                height="25px"
                style="filter: brightness(0) invert(1); margin-bottom: 10px"
            /></a>
            <br />
          </div>
        </div>
        <br />
        <hr width="90%" style="margin-left: 50px" />
        <div
          class="rows"
          style="
            display: flex;
            color: #dcdcdc;
            align-items: center;
            justify-content: space-evenly;
          "
        >
          <a href="" style="text-decoration: none; color: whitesmoke"
            >Terms of Service</a
          >
          <br />
          <a href="" style="text-decoration: none; color: whitesmoke"
            >Privacy Policy</a
          >
          <br />
          <a href="" style="text-decoration: none; color: whitesmoke"
            >Content Policy</a
          >
          <br />
        </div>
      </div>
    </footer>
    <script>
      //scroll logic
      document.addEventListener("scroll", () => {
        const header = document.querySelector("header");
        if (window.scrollY > 0) {
          header.classList.add("scrolled");
        } else {
          header.classList.remove("scrolled");
        }
      });

      //show More Logic
      document.addEventListener("DOMContentLoaded", function () {
        const items = document.querySelectorAll(".CardContainer .item");
        const showMoreButton = document.getElementById("show-more");
        let visibleCount = 5;

        // Initially show the first 7 items
        for (let i = 0; i < visibleCount; i++) {
          if (items[i]) {
            items[i].classList.add("visible");
          }
        }

        showMoreButton.addEventListener("click", function () {
          // Show 7 more items each time the button is clicked
          const nextVisibleCount = visibleCount + 5;
          for (let i = visibleCount; i < nextVisibleCount; i++) {
            if (items[i]) {
              items[i].classList.add("visible");
            }
          }
          visibleCount = nextVisibleCount;

          // Hide the button if there are no more items to show
          if (visibleCount >= items.length) {
            showMoreButton.style.display = "none";
          }
        });
      });
    </script>
  </body>
</html>
